<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
    <title><%= title %></title>
    <style>
      .navbar-medical {
        background: white;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .medical-bg {
        background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
        min-height: 100vh;
      }

      .medical-card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }
      .medical-card:hover {
        transform: translateY(-5px);
      }
      .form-container {
        max-width: 600px;
        margin: 0 auto;
      }
      .required-field::after {
        content: " *";
        color: #dc3545;
      }
    </style>
  </head>
  <body class="medical-bg">
    <nav class="navbar navbar-medical px-3">
      <a class="navbar-brand text-dark fw-bold" href="/">
        <i class="bi bi-heart-pulse me-2"></i>
        Медикал Клиник
      </a>
      <a href="/" class="btn btn-outline-primary">На главную</a>
    </nav>
    <% if (!submitted) { %>
    <div class="container py-5">
      <div class="form-container">
        <div class="card medical-card">
          <div class="card-header bg-primary text-white">
            <h2 class="card-title mb-0 text-center">
              <i class="bi bi-file-medical me-2"></i>
              Форма заявки
            </h2>
          </div>
          <div class="card-body p-4">
            <div id="successMessage" class="alert alert-success d-none">
              <i class="bi bi-check-circle-fill me-2"></i>
              Ваша заявка успешно отправлена! С вами свяжутся в ближайшее время.
            </div>

            <form method="post" action="/application" id="applicationForm">
              <div class="mb-3">
                <label for="fullName" class="form-label required-field">
                  ФИО
                </label>
                <input
                  type="text"
                  class="form-control"
                  id="fullName"
                  name="fullName"
                  required
                  pattern="[А-Яа-я\s]+"
                  placeholder="Введите ваше полное имя"
                />
                <div class="invalid-feedback">
                  Пожалуйста, введите ваше ФИО.
                </div>
              </div>

              <div class="mb-3">
                <label for="age" class="form-label required-field">
                  Возраст
                </label>
                <input
                  type="number"
                  class="form-control"
                  id="age"
                  name="age"
                  min="0"
                  max="150"
                  required
                  placeholder="Введите возраст"
                />
                <div class="invalid-feedback">
                  Пожалуйста, введите ваш возраст.
                </div>
              </div>

              <div class="mb-3">
                <label for="phone" class="form-label required-field">
                  Номер телефона
                </label>
                <input
                  type="tel"
                  class="form-control"
                  id="phoneNumber"
                  name="phoneNumber"
                  required
                  placeholder="+7 (___) ___-__-__"
                />
                <div class="invalid-feedback">
                  Пожалуйста, введите корректный номер телефона.
                </div>
              </div>

              <div class="mb-4">
                <label for="problem" class="form-label">
                  Опишите вашу проблему
                </label>
                <textarea
                  required
                  class="form-control"
                  id="problem"
                  name="problem"
                  rows="4"
                  maxlength="300"
                  placeholder="Опишите вашу проблему или симптомы..."
                ></textarea>
              </div>

              <button
                type="submit"
                class="btn btn-primary btn-lg w-100"
                id="submitBtn"
              >
                <i class="bi bi-send me-2"></i>
                Отправить заявку
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <% } else { %>
    <div class="container py-5">
      <div class="form-container">
        <div class="card medical-card">
          <div class="card-header bg-success text-white">
            <h2 class="card-title mb-0 text-center">
              <i class="bi bi-check-circle-fill me-2"></i>
              Заявка отправлена!
            </h2>
          </div>
          <div class="card-body p-4 text-center">
            <div class="mb-4">
              <i class="bi bi-check2-circle display-1 text-success"></i>
            </div>
            <h3 class="text-success mb-3">Спасибо за вашу заявку!</h3>
            <p class="text-muted mb-4">
              Ваша заявка успешно отправлена. Наш оператор свяжется с вами в
              ближайшее время для согласования деталей приёма.
            </p>
            <div class="d-grid gap-2">
              <a href="/application" class="btn btn-primary">
                <i class="bi bi-plus-circle me-2"></i>
                Оставить новую заявку
              </a>
              <a href="/" class="btn btn-outline-secondary">
                <i class="bi bi-house me-2"></i>
                На главную
              </a>
            </div>
          </div>
        </div>
        <% } %>
      </div>
    </div>
  </body>
</html>
