<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
	<title><%= title %></title>
</head>
<body>

	<% if (created ) {%>
		<div class="alert alert-success">
			Note has been created!
		</div>
	<% } %>

	<% if (error) {%>
		<div class="alert alert-danger">
			Something went wrong!
		</div>
	<% } %>

	<div class="container">
		<h1><%= title %></h1>

		<form action="/" method="post" class="mb-2">
			<div class="form-group mb-2">
				<input type="text" class="form-control" name="title" required>
			</div>

			<button class="btn btn-primary" type="submit">
				Create!
			</button>
		</form>

		<% if (notes.length) {%>

		<div class="card">
			<ul class="list-group">
				<% for (let i = 0; i < notes.length; i++) { %>
					<li class="list-group-item d-flex justify-content-between align-items-center">
						<%= notes[i].title %>
							<div>
								<button 
								class="btn btn-warning" 
								data-bs-toggle="modal" 
        						data-bs-target="#editModal"
								data-type="edit"
								data-title="<%= notes[i].title %>"
        						data-id="<%= notes[i].id %>">
									<i class="bi bi-pencil"></i>
								</button>

								<button class="btn btn-danger" data-type="remove" data-id="<%= notes[i].id %>">&times;</button>
							</div>
						</li>
				<% } %>
			</ul>
		</div>
		<% } else { %>
			<p>No notes!</p>
		<% } %>

				<div class="modal fade" id="editModal" tabindex="-1">
  					<div class="modal-dialog">
    					<div class="modal-content">
      						<div class="modal-header">
        						<h5 class="modal-title">Введите новое название</h5>

        						<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      						</div>
      
      						<div class="modal-body">
        						<input type="text" class="form-control" id="editNoteInput" name="newTitle" required>
      						</div>
      
      						<div class="modal-footer">

        						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>

        						<button type="button" class="btn btn-primary" id="saveEditBtn" data-type="saveNewTitle">OK</button>
      						</div>
    					</div>
  					</div>
				</div>
	</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script src="/app.js"></script>
	
</body>
</html>